== Futural internweb

=== Kvalitetskontroll

För repot gäller följande:

==== master

Master är den senaste släppta versionen. Release manager ansvarar för att
skjuta till master, andra utvecklare lämnar master ifred.

Om man vill uppmärksamma release mgr. på att kod behöver skjutas till
master kan man använda pull requests här på github.

Vår huvudserver heroku/karnevalist följer master.

==== develop

Develop är den senaste utvecklingsversionen. Alla utvecklare får skjuta till
develop, med vissa förbehåll.

<em>Kod i develop bör klara sina tester</em>. Undvik att skjuta kod till develop som
failar sina tester, håll den koden i en egen bransch eller lokalt tills den
lever upp till kraven.

Om du skriver ny kod till appen så ansvarar du för att skriva tester för att
dokumentera förväntat beteende. Om du hittar en bugg i någon annans kod så
hjälper det att skriva tester som den failar pga. av ovan sagda bugg.

Vår utvecklingsserver heroku/karnevalist-stage följer develop. Dock heter
branschen master på den servern. För att skjuta till stage används sålunda:

    git push stage develop:master

==== Övriga branscher

Här råder fri hopp och lek.

=== Övrigt

Anslutningsuppgifter till MySQL sparas som environment-variabler på servern. På Heroku kan man hämta dessa variabler med heroku config. Sedan flytten till vår egna server använder vi istället ett litet hemmabygge som kallas renv och ligger i bin/renv.sh. Det finns även på https://github.com/larsnystrom/renv.

Scriptet renv behöver <em>en remote</em> där hemsidan är deployad och <em>pathen till en .env-fil</em> på samma server. Dessa uppgifter kan ni få av den som sköter servern för tillfället.

Ställ in remote till servern där hemsidan är deployad:

    git remote add production URL

Pathen till .env-filen kan sparas med git config och läses då automatiskt av renv. Kör följande för att spara pathen med git config:

    git config renv.production.envfile PATH
